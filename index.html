<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="alternate" type="application/json" href="/feed.json" />
<link rel="alternate" type="application/atom+xml" href="/feed.xml" />
<title>memalign.github.io</title>
<meta property="og:title" content="memalign.github.io" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://memalign.github.io/index.html" />
<meta property="og:image" content="https://memalign.github.io/m/spacetrader/spacetrader-1000.png" />
<meta property="og:description" content="Introducing my latest game, playable right in your web browser: Space Trader In Space Trader, you can trade goods, hunt bounties, amass a fortune, buy a moon and retire. Spaceâ€¦" />
<link rel="stylesheet" href="/style.css">
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, user-scalable=yes'>
</head>
<body>
<div id="body">
<div id='feeds'>
<a href='/feed.xml'>RSS</a> | <a href='/feed.json'>JSON Feed</a>
</div><div id='header'><h1>memalign.github.io</h1></div>
<div id='top-header'><h3>( ( ( featured projects ) ) )</h3></div>
<div id='projects-grid'>
  <div id='projects-grid-entry'>
    <a href='/m/spacetrader/index.html'>
    <div id='projects-grid-title'>Space Trader</div>
    <div class='rect-img-container'><img src='/m/spacetrader/spacetrader.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/memplayer/index.html'>
    <div id='projects-grid-title'>MemPlayer</div>
    <div class='rect-img-container'><img src='/m/memplayer/memplayer.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/slice/index.html'>
    <div id='projects-grid-title'>Slice Tap Toy</div>
    <div class='rect-img-container'><img src='/m/slice/slice.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/cr/index.html'>
    <div id='projects-grid-title'>CaveRibbon</div>
    <div class='rect-img-container'><img src='/m/cr/CaveRibbon.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/fireworks/index.html'>
    <div id='projects-grid-title'>Fireworks Tap Toy</div>
    <div class='rect-img-container'><img src='/m/fireworks/fireworks.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/taptoy/index.html'>
    <div id='projects-grid-title'>Tap Toy</div>
    <div class='rect-img-container'><img src='/m/taptoy/taptoy.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/pceimage/index.html'>
    <div id='projects-grid-title'>PCEImage Editor</div>
    <div class='rect-img-container'><img src='/m/pceimage/koffing-code.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/lightsoff/index.html'>
    <div id='projects-grid-title'>Lights Off</div>
    <div class='rect-img-container'><img src='/m/lightsoff.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/formulagraph/index.html'>
    <div id='projects-grid-title'>FormulaGraph</div>
    <div class='rect-img-container'><img src='/m/formulagraph-stairs.png'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/counterfeitmonkey/index.html'>
    <div id='projects-grid-title'>Counterfeit Monkey</div>
    <div class='rect-img-container'><img src='/m/cm-map-cropped.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/dungeon/index.html'>
    <div id='projects-grid-title'>Dungeon Memalign</div>
    <div class='rect-img-container'><img src='/m/dungeon.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/pacmandungeon/index.html'>
    <div id='projects-grid-title'>Pac-Man Dungeon</div>
    <div class='rect-img-container'><img src='/m/pacman.jpg'></div>
    </a>
  </div>
  <div id='projects-grid-entry'>
    <a href='/m/similarsongs.html'>
    <div id='projects-grid-title'>Similar Songs</div>
    <div class='rect-img-container'><img src='/m/appleheadphones.png'></div>
    </a>
  </div>
</div>
<div id='top-header'><h3>( ( ( posts ) ) )</h3></div>
<div id='allposts'>
<div id='grid'>
<div id='grid-entry'>
<a href='p/spacetrader.html'>Space Trader</a><br />
<a href='p/memplayer.html'>MemPlayer</a><br />
<a href='p/slice.html'>Slice Tap Toy</a><br />
<a href='p/caveribbon.html'>CaveRibbon</a><br />
<a href='p/octogram.html'>Octogram</a><br />
<a href='p/mastodon.html'>Mastodon API</a><br />
<a href='p/airdesk.html'>AirDesk</a><br />
<a href='p/freshrss.html'>FreshRSS</a><br />
<a href='p/fireworks.html'>Fireworks Tap Toy</a><br />
<a href='p/remember.html'>Remember Forgotten Names</a><br />
<a href='p/pi-emscripten.html'>Emscripten on Raspberry Pi 400</a><br />
<a href='p/simplify-picking-restaurant.html'>Simplify Picking a Restaurant</a><br />
<a href='p/trippy-art.html'>Trippy Art</a><br />
<a href='p/taptoy.html'>Tap Toy</a><br />
<a href='p/pceimage-editor.html'>PCEImage Editor</a><br />
<a href='p/pceimage.html'>PCEImage</a><br />
<a href='p/beatles.html'>My Beatles Picks</a><br />
<a href='p/soundsjustlike.html'>SoundsJustLike</a><br />
<a href='p/puzzlescript.html'>PuzzleScript</a><br />
<a href='p/wheat-chex.html'>Wheat Chex</a><br />
</div><div id='grid-entry'>
<a href='p/pico8.html'>PICO-8</a><br />
<a href='p/fussy-checklist.html'>Fussy Baby Checklist</a><br />
<a href='p/zen-sleep.html'>Fall Asleep</a><br />
<a href='p/shape-your-destiny.html'>Shape Your Destiny</a><br />
<a href='p/tims-vermeer.html'>Tim's Vermeer</a><br />
<a href='p/day-and-night.html'>Day and Night</a><br />
<a href='p/lights-off.html'>Lights Off</a><br />
<a href='p/batman-curve.html'>Batman Curve</a><br />
<a href='p/formulagraph.html'>FormulaGraph</a><br />
<a href='p/bouncing-ball.html'>Bouncing Ball</a><br />
<a href='p/shape-catalog.html'>Catalog of Math Shapes</a><br />
<a href='p/draw-shapes.html'>Draw Shapes Using Math</a><br />
<a href='p/similar-songs.html'>Similar Songs</a><br />
<a href='p/reddit.html'>Building a Reddit app</a><br />
<a href='p/counterfeit-monkey.html'>Counterfeit Monkey</a><br />
<a href='p/listed-action-if.html'>Listed Action Interactive Fiction</a><br />
<a href='p/andrew-plotkin.html'>Andrew Plotkin's Zarfhome</a><br />
<a href='p/product-reviews.html'>Product Review Writing Prompts</a><br />
<a href='p/dungeon-memalign.html'>Dungeon Memalign</a><br />
<a href='p/pacman-dungeon.html'>Pac-Man Dungeon</a><br />
</div><div id='grid-entry'>
<a href='p/queens-gambit.html'>The Queen's Gambit</a><br />
<a href='p/rebecca-meyer.html'>Rebecca Meyer</a><br />
<a href='p/coding-machines.html'>Coding Machines</a><br />
<a href='p/clamps.html'>Clamps</a><br />
<a href='p/emoji-conway.html'>Emoji Simulator</a><br />
<a href='p/universal-paperclips.html'>Universal Paperclips</a><br />
<a href='p/rabbit-hole.html'>Fall Down the Rabbit Hole</a><br />
<a href='p/live-covid19.html'>Live COVID-19 Dashboard</a><br />
<a href='p/graph-js.html'>Create COVID-19 Graphs Using JavaScript</a><br />
<a href='p/books.html'>Books</a><br />
<a href='p/notes-txt.html'>notes.txt</a><br />
<a href='p/speed-up-av.html'>Download Video Into Your Brain</a><br />
<a href='p/tts-download-into-brain.html'>Download Text Into Your Brain</a><br />
<a href='p/source-control.html'>Source Control</a><br />
<a href='p/personal-projects.html'>Personal Projects</a><br />
<a href='p/text-adventure.html'>How to Program a Text Adventure</a><br />
<a href='p/feedly.html'>RSS and Feedly</a><br />
<a href='p/this-website.html'>Welcome</a><br />
</div>
</div>
</div>
<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/spacetrader.html'>Space Trader</a>
</h2>
</div>
<img src="/m/spacetrader/spacetrader-1000.png">
<div id='postdate'>Posted on 12/24/2024<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Games</a></div>
Introducing my latest game, playable right in your web browser: <a href="/m/spacetrader/index.html">Space Trader</a><br />
<br />
In Space Trader, you can trade goods, hunt bounties, amass a fortune, buy a moon and retire.<br />
<br />
Space Trader can be saved to your home screen as a PWA (Progressive Web App).<br />
<br />
<br />
Space Trader started as a game written by Pieter Spronck for Palm OS, released in 2002. <a href="https://en.wikipedia.org/wiki/Space_Trader_(Palm_OS)">Wikipedia page</a>. <a href="https://www.spronck.net/spacetrader/index.html">Official website</a> (<a href="/m/spacetrader-official-site-mirror/index.html">mirror</a>).<br />
<br />
You can play the <a href="https://archive.org/details/palm3_SpaceTrader">original</a> on archive.org.<br />
<br />
As one of my favorites, this game holds a special place in my heart. I played a ton in middle school and high school. This is the second port of the game I've made.<br />
<br />
Like SFCave (recreated as <a href="/m/cr/index.html">CaveRibbon</a>), I decided to recreate Space Trader as a web app to feed my nostalgia and give the game new life. I hope this version of Space Trader can survive long into the future thanks to the universal availability of web browsers and their devotion to compatibility.<br />
<br />
<br />
Some technical details:<br />
<br />
- As usual, I used <a href="/m/pceimage/index.html">PCEImage Editor</a> to create many graphics. I created the PCEImage format and tools so I could simply store and edit graphics as ASCII art. See them <a href="/m/spacetrader/Images.js">here</a>.<br />
<br />
- To aid debugging and unit testing, I use a deterministic random number generator called <a href="/m/spacetrader/GameRand.js">GameRand</a>. In debug mode, I can capture the random seed and log of every action taken in the game. Then I can replay that to reproduce a bug or create a test.<br />
&nbsp;&nbsp;- I've written many unit / integration tests for Space Trader. See them <a href="/m/spacetrader/UnitTests.js">here</a>.<br />
&nbsp;&nbsp;- Learn more about GameRand in the <a href="/p/caveribbon.html">post</a> for CaveRibbon.<br />
&nbsp;&nbsp;- A major downside to this technique for testing is that tests become invalid if a bug fix (or a new feature) changes the amount of random numbers consumed. I ended up remaking many tests one or two times. This added a few days of extra work to the project.<br />
&nbsp;&nbsp;- You can play the game with cheats and access the replay log on a special version of the game: <a href="/m/spacetrader/cheats.html">cheats.html</a>.<br />
<br />
- I translated an existing implementation of this game to vanilla JavaScript using ChatGPT. I could translate ~300 lines at a time. I audited every line produced. This worked pretty well and saved me a huge amount of time compared to manually translating the code. This was a somewhat zen activity for me because it was mechanical; tedious but rewarding to see how quickly I could progress through the whole codebase. This was the kind of programming I could do after an exhausting day at work. Major differences/difficulties:<br />
&nbsp;&nbsp;- The original code relies on integer math, but JavaScript uses float math. I needed to ensure all uses of numbers yielded an expected result. I ended up adding exhaustive runtime asserts and writing automated stress tests to catch problems.<br />
&nbsp;&nbsp;- ChatGPT would sometimes produce inconsistent translations, especially for enum names. These could lurk, waiting to cause a crash at runtime. I hunted these with stress tests, manual tests, nearly exhaustive code coverage, and replayable game logs (which I turned into tests).<br />
&nbsp;&nbsp;- Similarly, ChatGPT would inconsistently translate properties and their setters/getters. I left many awkward translations in place to save myself time, even though it makes the code worse.<br />
&nbsp;&nbsp;- The UI needed to be tailored to the web. I ended up writing almost all new code for the UI.<br />
&nbsp;&nbsp;- The original code had no tests. I wrote all new tests and a quick-and-dirty system for measuring code coverage. I even discovered several longstanding bugs in the original code.<br />
<br />
- Before translating the whole codebase, I investigated using emscripten to reuse as much of the original C code as possible. I decided I wouldn't be satisfied with the result. There wasn't separation of UI and business logic that would have let me easily build new UI tailored to web. There were a lot of Palm OS platform-specific functions that would need to be replaced. I didn't want to struggle to change the existing code where it became necessary.<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/memplayer.html'>MemPlayer</a>
</h2>
</div>
<img src="/m/memplayer/memplayer.png">
<div id='postdate'>Posted on 7/25/2024<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Tools</a></div>
I recently whipped up a simple audio player dedicated to listening to long audio files across multiple listening sessions.<br />
<br />
It's called MemPlayer and you can try it <a href="/m/memplayer/index.html">here</a>.<br />
<br />
<br />
The problem MemPlayer solves:<br />
<br />
I listen to most audiobooks in the excellent Libby app. It nails the core use case: remembers playback position, gives easy controls for jumping back/forward, and gives granular control over playback speed.<br />
<br />
Sometimes, though, I have a book (or other long audio recording) as a single standalone audio file. I still need all of those features for easy listening across multiple days.<br />
<br />
Instead of finding an existing app with exactly what I need, I experimented to see how quickly I could whip up a simple utility app using ChatGPT. I found the low overhead of web development plus ChatGPT to be a killer combination.<br />
<br />
I started with this prompt:<br />
<div id='code'>Generate HTML, JavaScript, and CSS for a simple web app with these requirements:<br />
- The user can browse their local disk to select an audio file<br />
- Alternatively, the user can drag and drop an audio file onto the web app<br />
- The web app allows the user to play the audio file, change playback speed, and skip forward and back by 10 seconds<br />
- The web app stores the file in local storage and restores it when the page is refreshed<br />
- The web app stores the current playback position and restores it when the page is refreshed. This way the user can load the page and resume what they were listening to.<br />
- There is a clear button which causes the web app to forget the current audio file and playback position</div>
This produced code for index.html, scripts.js, and styles.css that gave me 90% of what I needed. The UI was good, but the web app did not work perfectly.<br />
<br />
I steered it with a few specific suggestions in subsequent prompts, mainly to use IndexedDB to store the audio file because its original choice, localStorage, can't handle big files. I also needed to fix a bug in restoring playback position. I then made some minor style and user experience tweaks, added PWA metadata and icons, and was done!<br />
<br />
Overall, I was able to whip this up in about an hour, with some of the fixes and tweaks done on the go.<br />
<br />
I think there's a lot of potential to make custom tiny tool web apps with low effort this way. And one of the best parts of the web is that nearly everyone can use these tools without any setup across their phones, tablets, computers, etc. And they will hopefully continue working for decades to come without any developer intervention.<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/slice.html'>Slice Tap Toy</a>
</h2>
</div>
<img src="/m/slice/slice.jpg">
<div id='postdate'>Posted on 5/13/2024<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Games</a></div>
Introducing my latest project, playable right in your web browser: <a href="/m/slice/index.html">Slice Tap Toy</a><br />
<br />
Slice Tap Toy can also be saved to your home screen as a PWA (Progressive Web App).<br />
<br />
This project is my spin on the touch screen swipe-to-slice concept. Every pizza can be sliced multiple times, down to tiny slivers. Can you unlock the whole menu?<br />
<br />
Swiping across a touch screen to slice objects is a delightful and fun mechanic. You might remember some of the best early games for iPhone: Fruit Ninja and Cut The Rope.<br />
<br />
Unfortunately, these formerly wonderful games are no longer delightful, now with constant interruptions and ads. Go try them and see for yourself. These games have been ruined.<br />
<br />
Slice Tap Toy is a simple passion project so it can be light, fun, and pristine.<br />
<br />
Development details:<br />
<br />
I was inspired to make Slice Tap Toy when I came across <a href="https://js13kgames.com/entries/samurai-sam">Samurai Sam</a>, an entry to the 2023 JS13KGames competition. This got me thinking about slicing games.<br />
<br />
I decided to do some quick prototyping by hacking on <a href="/m/taptoy/index.html">Tap Toy</a>'s source code. I vetted that I could track slices from touch and mouse input, draw the slices, and detect collisions without much work. Like the original Tap Toy, I use <a href="/m/pceimage/index.html">PCEImage</a> for the art.<br />
<br />
Like <a href="/m/cr/index.html">CaveRibbon</a> (<a href="/p/caveribbon.html">project details</a>), I used LLMs to help. I could do some things faster, I was able to get the website to look how I wanted without becoming an expert on CSS, and (new to this project) I was able to get artistic inspiration for the art. I asked DALL-E to generate pizza pixel art. What I got were grotesque abominations that, to this day, have eroded some of my enjoyment of pizza. I stared at flesh colored cheese and glitchy toppings and turned them into my own cleaner pixel art pizzas. I'll spare you the examples.<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/caveribbon.html'>CaveRibbon</a>
</h2>
</div>
<img src="/m/cr/CaveRibbon-gameplay.png">
<div id='postdate'>Posted on 2/19/2024<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Games</a></div>
Introducing my latest game, playable right in your web browser: <a href="/m/cr/index.html">CaveRibbon</a><br />
<br />
CaveRibbon is a one-button game where you control a ribbon gliding through a shrinking cavern. Avoid the walls and obstacles as long as you can. Compete with yourself and your friends by sharing a replay. Submit your high scores to get into the hall of fame!<br />
<br />
CaveRibbon can be saved to your home screen as a PWA (Progressive Web App).<br />
<br />
<br />
This game is a tribute to <a href="http://www.sunflat.net">Sunflat</a>'s SFCave for Palm OS. You can play the <a href="https://archive.org/details/palm3_sfcave">original</a> on archive.org.<br />
<br />
In fact, it was archive.org that stirred up my nostalgia <a href="https://www.theverge.com/2022/11/25/23478396/internet-archive-palm-pilot-emulation-games-apps-dope-wars">over a year ago</a> by publishing a <a href="https://archive.org/details/softwarelibrary_palm">collection of 565 Palm OS apps</a>, all usable on the web thanks to a Palm OS emulator.<br />
<br />
When I was in middle school, I would play SFCave on a Palm m130 at night when I was supposed to go to bed. My dad and I had an ongoing competition to see who could get the highest score.<br />
<br />
This was my inspiration to add the replay and share features which let you replay the exact same round, with your previous playthrough visible as a head-to-head competitor.<br />
<br />
<br />
Some technical details:<br />
<br />
- I used <a href="/m/pceimage/index.html">PCEImage Editor</a> to create the pixel font and many graphics. I created the PCEImage format and tools so I could simply store and edit graphics as ASCII art. See them <a href="/m/cr/Images.js">here</a>.<br />
<br />
- This game is entirely static files. There's no server-side backend. To create replay URLs, I need to serialize the entire game state into the URL itself. This proved to be challenging because there are URL size limits in browsers and messaging apps. In my first approach, I wrote a bunch of code to serialize all of the wall, obstacle, and player positions. This proved to be too much data. I came up with a few tricks to significantly shrink the data:<br />
<br />
&nbsp;&nbsp;- I compress player positions lossily and then interpolate them as part of deserialization. I keep only positions at the top of a peak, bottom of a valley, and when the user is close to an obstacle. I only have to keep ~4% of the original data.<br />
<br />
&nbsp;&nbsp;- I use a deterministic random number generator called <a href="/m/cr/GameRand.js">GameRand</a>. As long as I reuse the random number generator's seed and don't change the code to use random numbers differently I will get the exact same wall and obstacle positions in a replay.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;- I first came across GameRand in <a href="https://phoboslab.org/">phoboslab</a>'s game <a href="https://phoboslab.org/underrun/">underrun</a> (<a href="https://github.com/phoboslab/underrun/blob/master/source/random.js">source</a>).<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;- I searched for the constant 0x49616E42 to find the origins of this function. This led me down a rabbit hole: a <a href="https://stackoverflow.com/questions/1046714/what-is-a-good-random-number-generator-for-a-game">StackOverflow post</a> which links to a <a href="https://web.archive.org/web/20091209122817/http://ianbullard.squarespace.com/journal/2009/4/28/why-you-should-never-use-rand.html">blog post</a> (now only available on archive.org) which links to this <a href="http://www.flipcode.com/archives/07-15-2002.shtml">post from 2002</a> introducing a faster rand function by Stephan Schaem, who appears to be the original author.<br />
<br />
&nbsp;&nbsp;- I couldn't just serialize the replay as JSON. That's not nearly compact enough (every digit is stored as a character!). Instead, I packed raw bytes into a buffer and serialized that into Base64. I did some tweaks to squeeze some additional efficiency (such as replacing characters that need to be percent-encoded in URLs).<br />
<br />
&nbsp;&nbsp;- Replay URLs for scores of 700 or higher get a nice image preview (Open Graph image) that includes the score. I generated all of these files statically using PCEImage and a script.<br />
<br />
- This is the first project where I've made use of an LLM to help. I used ChatGPT and it had great positive impact:<br />
<br />
&nbsp;&nbsp;- It helped me do some things faster, such as writing boilerplate or example code that I would have had to write myself while wading through documentation.<br />
<br />
&nbsp;&nbsp;- It helped me do some things I wasn't willing to do myself. I don't have time to learn the right way to get specific UI behaviors using HTML and CSS. I would have compromised the UI design to fit within my current skills. With ChatGPT's help, I was able to get exactly what I wanted much faster than having to learn how to do this on my own.<br />
<br />
&nbsp;&nbsp;- In general, I'm energized to work on more projects with these tools. I found the accuracy to be far above what I expected. It's more than good enough for a non-mission-critical side project.<br />
<br />
- I'm trying out some design ideas from <a href="https://worrydream.com/">Bret Victor</a>'s <a href="https://worrydream.com/MagicInk/">Magic Ink paper</a> (<a href="/m/MagicInk.pdf">backup</a>). My favorite insights:<br />
<br />
&nbsp;&nbsp;- Most software design should focus on information graphic design, not interaction design<br />
<br />
&nbsp;&nbsp;- The case study of Amazon's book listings drives that point home<br />
<br />
&nbsp;&nbsp;- Try using sentences to describe settings rather than have a list of toggles (illustrated with his BART widget). I use this concept for sound effects settings in CaveRibbon.<br />
<br />
&nbsp;&nbsp;- Instead of requiring interaction, make decisions for the user based on context. I use this idea in CaveRibbon by fading out the rest of the UI during gameplay instead of having a "full screen" button.<br />
<br />
<br />
See also:<br />
<br />
- Sunflat's latest games for <a href="http://www.sunflat.net/iphone/">iOS</a> and <a href="http://www.sunflat.net/android/">Android</a><br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/octogram.html'>Octogram</a>
</h2>
</div>
<img src="/m/octogram/octogram.png">
<div id='postdate'>Posted on 12/23/2023<br />
Tags: <a href='/tags.html'>Games</a></div>
In an <a href="https://news.ycombinator.com/item?id=38732804">HN post</a> about a very cool <a href="/p/puzzlescript.html">PuzzleScript</a> game called <a href="https://jacklance.github.io/PuzzleScript/play.html?p=cfdcc6e23f1fb3e9de2fd42fafaf4d4c">Enigmash</a>, I learned sad news.<br />
<br />
Jack Lance, the author of the game, died earlier this year.<br />
<br />
I went to his website, <a href="https://jacklance.github.io">jacklance.github.io</a>, and saw that it had been updated to refer to him in the past tense.<br />
<br />
Seeing that the site is hosted on GitHub, I looked at the <a href="https://github.com/JackLance/jacklance.github.io/commit/92fc694347c53c7c87d8d5086aefde10a9a422de">recent updates</a>. I discovered two things:<br />
<br />
- He made this update himself, to show up a few days later<br />
<br />
- He published one last game, Octogram, but unfortunately made a typo in the URL to the game<br />
&nbsp;&nbsp;- Update 12/30/23: I <a href="https://github.com/JackLance/jacklance.github.io/commit/92fc694347c53c7c87d8d5086aefde10a9a422de#commitcomment-135624323">commented</a> on the git commit and one of Jack's siblings saw it. They pushed a fix and now the link on Jack's website is working!<br />
<br />
Here's a working link to Jack Lance's last game: <a href="https://jacklance.github.io/octogram.html">Octogram</a>.<br />
<br />
It's a super tricky puzzle game with fun wordplay. Give the <a href="https://github.com/JackLance/jacklance.github.io/blob/master/octogram.html">source code</a> a peek if you get stuck -- but beware this will spoil all of the answers!<br />
<br />
<br />
More resources:<br />
<br />
- Jack's <a href="https://jacklance.github.io/games.html">games</a><br />
- <a href="https://puzzleswiki.miraheze.org/wiki/Jack_Lance">Jack Lance</a> on Puzzle Wiki<br />
- A <a href="https://joelthefox.github.io/2023-05-04-Jack-Lance/">blog post</a> about Jack's work<br />
- Another <a href="https://www.puzzlesforprogress.net/post/the-puzzling-xlnc-of-jack-lance-1997-2023">blog post</a> about Jack's work<br />
- <a href="/m/octogram/jacklance.github.io.zip">Backup</a> of jacklance.github.io<br />
&nbsp;&nbsp;- Due to some technical details of PuzzleScript, none of his PuzzleScript games are in this repo. Instead, they are stored as GitHub gists. I've grabbed a separate <a href="https://github.com/memalign/memalign.github.io/tree/master/m/octogram">backup</a> of every gist linked to by his games page for posterity.<br />
- A YouTube <a href="https://www.youtube.com/watch?v=v_xdEIPZ2Po">video</a> where Jonathan Blow mentions Jack's death. "...he was 25... he was already one of the best game designers in the world and was on track to be even better"<br />
- <a href="https://www.douglassfh.com/obituary/zachary-polansky">Obituary</a> under his real name<br />
<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/mastodon.html'>Mastodon API</a>
</h2>
</div>
<img src="/m/mastodon-wordmark-black-text.svg">
<div id='postdate'>Posted on 11/27/2023<br />
Tags: <a href='/tags.html'>Programming</a></div>
In the same vein as <a href="/p/freshrss.html">FreshRSS</a>, another open source project with a cool API is Mastodon.<br />
<br />
Many users I followed on Twitter (now X) have migrated to Mastodon. I found that the Mastodon apps I tried didn't perfect the one thing I want: to read a chronological timeline of posts and reblogs from the accounts I follow - always keeping my spot since the last time I checked.<br />
<br />
I had already written my own Twitter client for this, which I've been using for many years, and just finished adapting that for Mastodon.<br />
<br />
The Mastodon API made this really easy! I can tell that a lot of care went into making this core use case straightforward. Thank you Mastodon developers!<br />
<br />
Here's the short list of requests needed to make a simple Mastodon timeline viewer app:<br />
<br />
<div id='code'>Below, I&#039;m using https://mstdn.party but you should substitute the Mastodon server you use.<br />
<br />
1. Register your app.<br />
- Docs: <a href="https://docs.joinmastodon.org/methods/apps/#create">https://docs.joinmastodon.org/methods/apps/#create</a><br />
- Replace YOURAPPNAME and YOURWEBSITE below. YOURWEBSITE should be a full url starting with &quot;https://&quot;<br />
<br />
curl -X POST -F &#039;client_name=YOURAPPNAME&#039; -F &#039;redirect_uris=urn:ietf:wg:oauth:2.0:oob&#039; -F &#039;website=YOURWEBSITE&#039; https://mstdn.party/api/v1/apps<br />
<br />
The response is JSON and includes important fields you will need in later steps: client_id and client_secret. I&#039;ll refer to these as YOURCLIENTID and YOURCLIENTSECRET below.<br />
<br />
<br />
2. Give your app permission to read your account information. Open this URL in your browser and authorize it. You&#039;ll be shown an authorization code which I&#039;ll refer to as YOURAUTHCODE below.<br />
- Docs: <a href="https://docs.joinmastodon.org/methods/oauth/#authorize">https://docs.joinmastodon.org/methods/oauth/#authorize</a><br />
<br />
https://mstdn.party/oauth/authorize?response_type=code&amp;client_id=YOURCLIENTID&amp;redirect_uri=urn:ietf:wg:oauth:2.0:oob<br />
<br />
<br />
3. Get an access token for your app to use to request your account&#039;s timeline (and make any other helpful API requests).<br />
- Docs: <a href="https://docs.joinmastodon.org/methods/oauth/#token">https://docs.joinmastodon.org/methods/oauth/#token</a><br />
<br />
curl -X POST \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;client_id=YOURCLIENTID&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;client_secret=YOURCLIENTSECRET&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;redirect_uri=urn:ietf:wg:oauth:2.0:oob&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;grant_type=authorization_code&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;code=YOURAUTHCODE&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-F &#039;scope=read&#039; \<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://mstdn.party/oauth/token<br />
<br />
The response is JSON and includes the access_token. I&#039;ll refer to that as YOURACCESSTOKEN below.<br />
<br />
<br />
4. Now your app can load your timeline.<br />
- Docs: <a href="https://docs.joinmastodon.org/methods/timelines/#home">https://docs.joinmastodon.org/methods/timelines/#home</a><br />
<br />
curl &#039;https://mstdn.party/api/v1/timelines/home&#039; -H &#039;Authorization: Bearer YOURACCESSTOKEN&#039;<br />
<br />
The result is JSON with everything you need to display the timeline in full. I love that it&#039;s all included in a single API request! This even includes account information (display name, username, the image URL for the poster&#039;s avatar, and more) for the people you follow and the people whose posts they have reblogged.<br />
<br />
One helpful argument to include is &quot;limit&quot;. I like to request the max number of posts supported by the API, 40.<br />
<br />
curl &#039;https://mstdn.party/api/v1/timelines/home?limit=40&#039; -H &#039;Authorization: Bearer YOURACCESSTOKEN&#039;<br />
<br />
When refreshing my app, I want to request all posts that are new since the last time I refreshed. I accomplish this by using the max_id argument.<br />
<br />
I start by requesting the most recent 40 posts:<br />
<br />
curl &#039;https://mstdn.party/api/v1/timelines/home?limit=40&#039; -H &#039;Authorization: Bearer YOURACCESSTOKEN&#039;<br />
<br />
I check if this includes the last post my app is aware of. If not, I request farther back by including &quot;max_id=&quot; the id of the oldest post in the response I just got. Example:<br />
<br />
curl &#039;https://mstdn.party/api/v1/timelines/home?limit=40&amp;max_id=123456789&#039; -H &#039;Authorization: Bearer YOURACCESSTOKEN&#039;<br />
<br />
I continue loading back like this until any of these conditions are true:<br />
- I find posts that my app already knows about<br />
- I get no posts in response<br />
- I get posts older than 1 month (I don&#039;t want to accidentally load back too far)<br />
- I&#039;ve made more than 5 requests (I don&#039;t want to create excess traffic)</div>
And that's it! My app only needs to use a single API to refresh my timeline. I did steps 1 through 3 manually and hard-coded the access token into my app, using it to perform step 4 every time I want to refresh. This is ok because this app is just for me so I don't need a more dynamic authentication flow.<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/airdesk.html'>AirDesk</a>
</h2>
</div>
<img src="/m/airdesk.jpg">
<div id='postdate'>Posted on 11/26/2023<br />
Tags: <a href='/tags.html'>Parenting</a>, <a href='/tags.html'>Tools</a>, <a href='/tags.html'>Leisure</a></div>
There's not enough time in the day for everything I want and need to do. Parenting, work, exercise, hobbies, sleep, etc.<br />
<br />
I've found that even optimizing a few minutes here and there can add up to make life easier and more enjoyable. I still use tools for consuming <a href="/p/tts-download-into-brain.html">text</a> and <a href="/p/speed-up-av.html">audio/video</a> faster.<br />
<br />
Here's one of the biggest new optimizations I was able to make this year.<br />
<br />
I had a bunch of work time and a bunch of hobby time I wanted to spend in front of a keyboard. This is thoughtful writing or programming time that couldn't be stolen a few minutes at a time while waiting in line, walking between meetings, etc.<br />
<br />
I also had a bunch of underutilized time on a stationary exercise bike. I mostly spent that time reading news feeds or watching TV/movies. I enjoyed that a lot, but it wasn't the right balance of time spent doing that when I had other things I wanted to prioritize.<br />
<br />
I searched for a product that would let me use a laptop or iPad + keyboard case while exercising on the stationary bike.<br />
<br />
I came across <a href="https://airdesks.com">airdesks.com</a> and bought their <a href="https://airdesks.com/products/laptop/laptop-desk/">laptop desk</a>. I got the 64" tall, "Average Size Laptop", No AirShelves config. It's been awesome. I use it on the bike every day and occasionally as a standing desk.<br />
<br />
Right now, I'm writing this post while exercising on the bike while my son is napping -- something I couldn't have squeezed in without this desk!<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/freshrss.html'>FreshRSS</a>
</h2>
</div>
<img src="/m/FreshRSS-logo.png">
<div id='postdate'>Posted on 11/19/2023<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>RSS</a></div>
This year has been rocky for free APIs I've enjoyed adopting in personal projects. Twitter (now X) killed 3rd party clients, Reddit made similarly killer API pricing changes, and now Feedly has started charging too.<br />
<br />
Fortunately, Feedly's API pricing is very reasonable right now: $8/mo or $72/year!<br />
<br />
Feedly provides a great service, as I <a href="/p/feedly.html">wrote</a> in March 2020. It's worth paying for at this price.<br />
<br />
I've depended on Feedly ever since Google Reader shut down in 2013. I seamlessly migrated and never had problems for 10 years of use. Feedly is a great way to keep up to date with RSS feeds and there are several great RSS reader apps that support it. Feedly is very reliable and "just works".<br />
<br />
But this is an era of paid subscription overload. Even though the price is reasonable, I sought out alternatives that wouldn't carry the risk of incremental price increases over the coming years.<br />
<br />
And I found one that, for the past few weeks, has proven to be good enough to replace Feedly for me: <a href="https://www.freshrss.org">FreshRSS</a> (<a href="https://github.com/FreshRSS/FreshRSS">GitHub</a>).<br />
<br />
It's a free and open source project but using it came with the cost of time. I spent the past few weeks writing a bunch of code, finding a reliable host, and cross-checking with Feedly to ensure I'm getting good results.<br />
<br />
Here are some notes on adopting FreshRSS in a personal project. The complexity and uncertainty are the downsides of using this instead of Feedly. The benefits include its price (free), that it is open source, and the option to self-host.<br />
<br />
- Export existing feeds from Feedly as an OPML file. <a href="https://docs.feedly.com/article/52-how-can-i-export-my-sources-and-feeds-through-opml">Instructions</a>.<br />
<br />
- Find a FreshRSS host or host it yourself. Here's a list of <a href="https://freshrss.org/cloud-providers.html">official hosts</a>. I tried one, but found it to be unreliable -- it seemed to purge my history after ~1 week. I switched to a different one and have had better results.<br />
<br />
- Once logged into the FreshRSS host, update some settings:<br />
&nbsp;&nbsp;- Profile: create an Authentication token. This will be used to automate updating all feeds. Create an API password. This will be used when you adopt the API to load feed information, news entries, and mark them as read. Take note of the API URL (example: https://host.tld/p/api/).<br />
&nbsp;&nbsp;- Archiving: change settings to keep longer history. I think this helps avoid old articles reappearing as unread in your feeds. These settings do not appear to be honored by all hosts.<br />
<br />
- Import OPML file into FreshRSS: In the web UI, click the folder icon, then Subscription Management, then the folder icon (again), then Import / Export. Then you can pick a file to upload to import.<br />
<br />
- To reliably refresh all feeds from the source, I've found it necessary to set up a cron job on a server I own to force FreshRSS to refresh. I'm running this every 4 minutes, but FreshRSS will only honor it every ~15-20 minutes. Use your username and the authentication token configured in FreshRSS settings. Make sure to URL encode them (space will need to be replaced by +, special characters will need to be %-encoded).<br />
<div id='code'>*/4 * * * * /usr/bin/sh /path/to/updateFreshRSS.sh</div>
updateFreshRSS.sh:<br />
<div id='code'>/usr/bin/curl &#039;https://host.tld/p/i/?c=feed&amp;a=actualize&amp;ajax=1&amp;force=1&amp;user=YOURUSERNAME&amp;token=AUTHENTICATIONTOKENSETABOVE&#039;</div>
&nbsp;&nbsp;- Most RSS feeds keep enough history that you won't miss entries even if you refresh infrequently. For me, one feed in particular lost entries in FreshRSS compared to Feedly: the unofficial Hacker News front page feed from <a href="https://hnrss.github.io/">hnrss.org</a>. Because this feed seems to provide a current snapshot rather than full history, FreshRSS's less frequent refreshes ended up missing entries that Feedly would catch. My frequent cron job plus changing the feed url from https://hnrss.org/frontpage to https://hnrss.org/frontpage?count=100 worked well enough to nearly match Feedly's results (and any discrepancies were actually desirable, like missing posts that were quickly flagged to death).<br />
<br />
- Now, you're ready to adopt the API. FreshRSS's API is identical to Google Reader's! The official documentation even links to old web pages that detail the Google Reader API. I found a few docs helpful:<br />
&nbsp;&nbsp;- The <a href="http://freshrss.github.io/FreshRSS/en/developers/06_GoogleReader_API.html">official documentation</a><br />
&nbsp;&nbsp;- The server-side <a href="https://github.com/FreshRSS/FreshRSS/blob/edge/p/api/greader.php">code</a> that implements the API<br />
&nbsp;&nbsp;- This <a href="https://web.archive.org/web/20130710044440/http://undoc.in/api.html">old archived webpage</a> that details the Google Reader API<br />
<br />
Some important requests:<br />
<br />
<div id='code'>Authenticate:<br />
curl &#039;https://host.tld/p/api/greader.php/accounts/ClientLogin?Email=YOURUSERNAME&amp;Passwd=YOURAPIPASSWORD&#039;<br />
<br />
This gives a response that looks like:<br />
SID=YOURUSERNAME/123456123456123456abcdefabcdef1234561234<br />
LSID=null<br />
Auth=YOURUSERNAME/123456123456123456abcdefabcdef1234561234<br />
<br />
Save the string that comes after &quot;Auth=&quot;. I&#039;ll call that YOURAUTH below.<br />
<br />
Get a &quot;write token&quot; that will allow you to mark entries as read:<br />
curl -H &quot;Authorization:GoogleLogin auth=YOURAUTH&quot; &#039;https://host.tld/p/api/greader.php/reader/api/0/token&#039;<br />
<br />
The response is a string. Use the string as WRITETOKEN below.<br />
<br />
Get all news entries in JSON form:<br />
curl -H &quot;Authorization:GoogleLogin auth=YOURAUTH&quot; &#039;https://host.tld/p/api/greader.php/reader/api/0/stream/contents/reading-list&#039;<br />
<br />
Get all unread news entries in JSON form:<br />
curl -H &quot;Authorization:GoogleLogin auth=YOURAUTH&quot; &#039;https://host.tld/p/api/greader.php/reader/api/0/stream/contents/reading-list?xt=user/-/state/com.google/read&#039;<br />
<br />
Mark an entry (or multiple entries) as read using their entry IDs. In this example, I&#039;ve put ENTRYID1, ENTRYID2, and ENTRYID3 as example placeholders:<br />
curl -H &quot;Authorization:GoogleLogin auth=YOURAUTH&quot; &#039;https://host.tld/p/api/greader.php/reader/api/0/edit-tag&#039; -X POST -d &#039;T=WRITETOKEN&amp;a=user/-/state/com.google/read&amp;i=ENTRYID1&amp;i=ENTRYID2&amp;i=ENTRYID3&#039;<br />
<br />
Get your subscription list, which gives you an icon image URL for each feed:<br />
curl -H &quot;Authorization:GoogleLogin auth=YOURAUTH&quot; &#039;https://host.tld/p/api/greader.php/reader/api/0/subscription/list?output=json&#039;</div>

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/fireworks.html'>Fireworks Tap Toy</a>
</h2>
</div>
<img src="/m/fireworks/fireworks.png">
<div id='postdate'>Posted on 9/17/2023<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Art</a>, <a href='/tags.html'>Games</a></div>
Introducing my latest project: <a href="/m/fireworks/index.html">Fireworks Tap Toy</a><br />
<br />
On this year's Fourth of July, my toddler son discovered a love of fireworks. With Fireworks Tap Toy, I'm trying to bring some of that magic to the touch screen.<br />
<br />
Tap, click, type, or go into "auto launch" mode.<br />
<br />
This project is a remix of a few other projects:<br />
<br />
- <a href="/m/taptoy/index.html">Tap Toy</a>, which has its own <a href="/p/taptoy.html">story</a><br />
&nbsp;&nbsp;- I copied and modified index.html and progressive web app pieces<br />
&nbsp;&nbsp;- I copied over touch, mouse, and keyboard support<br />
&nbsp;&nbsp;- I copied over sound effects and music utilities<br />
<br />
- An old <a href="https://codepen.io/whqet/pen/abooRX">codepen</a> (<a href="/m/fireworks/codepen.html">backup</a>) someone created to teach others how to animate fireworks using JavaScript canvas<br />
&nbsp;&nbsp;- I chose this over fireworks JavaScript frameworks people have shared because it's so much simpler. I don't like the hassle of dependencies. I don't want to install some tool or import an opaque blob. I just want to write some (ideally self-contained, vanilla) code for fun. Here's the <a href="https://github.com/crashmax-dev/fireworks-js/">top hit</a> for 'fireworks javascript' which I looked into and chose not to use. Where even is the code??<br />
<br />
<br />
Some tips:<br />
<br />
- You can add Fireworks Tap Toy to your home screen on iOS or Android. If you do that, it'll behave more like a normal app. (I did the extra bit of work to make this a "progressive web app")<br />
<br />
- If you give this to a kid, you can use <a href="https://support.apple.com/en-us/HT202612">Guided Access</a> to prevent them from leaving the app<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/remember.html'>Remember Forgotten Names</a>
</h2>
</div>
<img src="/m/space-alphabet.jpg">
<div id='postdate'>Posted on 5/21/2023<br />
Tags: <a href='/tags.html'>Brain Hacking</a></div>
I use this trick when I can't remember a name I used to know. It works for names of actors, teachers, friends of friends, etc.<br />
<br />
The trick:<br />
<br />
First, try to remember as much as you can about the person. Imagine their face, appearance, and other biographical information.<br />
<br />
Then go through the alphabet saying a name for each letter. Try to pick names that are as plausible as possible for the person you're trying to remember.<br />
<br />
Example:<br />
<br />
What was my old roommate's girlfriend's name?<br />
<br />
She was from Connecticut, they dated for a few years, she had long dark hair, she was allergic to dogs, she worked as an accountant, ...<br />
<br />
A... Ashley<br />
B... Blaire<br />
C... Chelsea<br />
D... Daphne<br />
E... Eliza<br />
F... Frances<br />
G... Genevieve<br />
H... Hillary<br />
I... Irene<br />
J... Jessica<br />
K... Katherine<br />
L... Laura<br />
M... Monica<br />
N... Nancy<br />
O... Olivia<br />
P... Penny<br />
Q... Queenie<br />
R... Rachel<br />
S... Stephanie! That's it!<br />
<br />
I can almost feel the old dusty neural pathways light up when it finally clicks!
</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/pi-emscripten.html'>Emscripten on Raspberry Pi 400</a>
</h2>
</div>
<img src="/m/raspberry-pi-logo.png">
<div id='postdate'>Posted on 1/15/2023<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Raspberry Pi</a></div>
I recently completed a harrowing journey to install Emscripten on a Raspberry Pi 400. There were many hiccups along the way that brought back bad memories from the ~8 years that I used Linux (4 on Gentoo, 4 on Debian) as my daily driver OS.<br />
<br />
If you're running a well-trodden configuration, things work pretty smoothly. If you're running anything else, you'll spend hours, days, or even years with systems that aren't working 100%.<br />
<br />
For Emscripten, Raspberry Pi 400 is not a well-trodden configuration.<br />
<br />
Emscripten provides official binaries for many configurations and I bet the <a href="https://emscripten.org/docs/getting_started/downloads.html#sdk-download-and-install">official tutorial</a> goes really quickly and smoothly if you are running an x64 CPU.<br />
<br />
They even provide binaries if you're running an arm64 CPU, just install using this command (see <a href="https://github.com/emscripten-core/emsdk/issues/547">this ticket</a> for more info):<br />
<div id='code'>./emsdk install latest-arm64-linux</div>
But if you are running a 32-bit Intel-based (x86) or ARM CPU, then you will need to build from source.<br />
<br />
Raspberry Pi 400 is a 32-bit ARM CPU so I found myself needing to build from source.<br />
<br />
And, at least on my machine, the default commands did not work.<br />
<br />
(I also tried to get Emscripten installed in the iSH iOS app, which emulates an x86 CPU. The emsdk script spent hours cloning the LLVM repository and then started building from source but iSH consistently crashed early in the build process. I gave up. It's possible this will work in the future.)<br />
<br />
Here are the steps I followed, what failed, and how I got it working:<br />
<br />
My initial configuration: Raspberry Pi 400 running the Buster (Debian 10) version of Raspbian that came with the SD card. I had installed some packages for other purposes so it's possible I won't mention some packages vital to making these steps work.<br />
<br />
I needed to install one package:<br />
<div id='code'>sudo apt-get install cmake</div>
I think that the resources emscripten pulls plus the intermediate build products can end up taking tens of gigs of storage (I only checked once during build and it was 22GB). I didn't have that much free space on the Raspberry Pi's SD card so I used a USB-C external drive. My external drive is formatted exfat.<br />
<br />
The exfat filesystem doesn't support symlinks and building will fail hours into the process because of that:<br />
<div id='code'>[ 50%] Linking CXX shared library ../../lib/libLTO.so<br />
CMake Error: failed to create symbolic link &#039;../../lib/libLTO.so&#039;: operation not permitted<br />
CMake Error: cmake_symlink_library: System Error: Operation not permitted<br />
make[2]: *** [tools/lto/CMakeFiles/LTO.dir/build.make:168: lib/libLTO.so.16git] Error 1<br />
make[2]: *** Deleting file &#039;lib/libLTO.so.16git&#039;<br />
make[1]: *** [CMakeFiles/Makefile2:17719: tools/lto/CMakeFiles/LTO.dir/all] Error 2<br />
make: *** [Makefile:152: all] Error 2<br />
Build failed due to exception!</div>
Instead of reformatting my external drive, I created a very large disk image on it which I formatted as ext4:<br />
<div id='code'># 200GB image - I think this is overkill but I wasn&#039;t willing to fail because of insufficient disk space<br />
# Some guides suggest using the fallocate command to create a disk image but I found that command does not work when writing to an exfat drive<br />
dd if=/dev/zero of=image.iso bs=1G count=200<br />
<br />
# Format the image ext4<br />
mkfs.ext4 -j image.iso</div>
Then I mounted the disk image and gave the pi user full ownership:<br />
<div id='code'>cd /media/<br />
sudo mkdir emscripten-disk<br />
sudo mount /path/to/image.iso emscripten-disk<br />
cd emscripten-disk<br />
sudo chown -R pi:pi .</div>
Within that directory, I ran this:<br />
<div id='code'>git clone https://github.com/emscripten-core/emsdk.git<br />
cd emsdk<br />
./emsdk install sdk-upstream-main-32bit -j1</div>
The "-j1" argument forces the build to use only one CPU. When I originally attempted to install without that argument, the build failed with very little feedback. Just this generic error, no specific compiler errors:<br />
<div id='code'>Error 2<br />
Build failed due to exception!</div>
I think this is caused by the machine running out of memory (or maybe some other kind of compiler crash).<br />
<br />
Of course, building with only one CPU makes this whole process take much longer. It took ~16 hours for everything to build.<br />
<br />
When the build completes, run this:<br />
<div id='code'>./emsdk activate sdk-upstream-main-32bit</div>
Pay attention to the output of that command because it tells you how to add the right directories to PATH for emcc to be found.<br />
<br />
After all that, following the <a href="https://emscripten.org/docs/getting_started/Tutorial.html#tutorial">official tutorial</a>, I created hello_world.c and tested the compiler:<br />
<div id='code'>emcc hello_world.c<br />
node a.out.js</div>
And I got this error:<br />
<div id='code'>/path/to/a.out.js:144<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw ex;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^<br />
ReferenceError: globalThis is not defined</div>
This is because Buster's version of nodejs is 10.24.0, a version before globalThis is supported.<br />
<br />
This command did produce hello.html which worked as expected in my browser:<br />
<div id='code'>emcc hello_world.c -o hello.html</div>
To get node working, I needed to update my Raspberry Pi to Bullseye (Debian 11). I followed <a href="https://raspberrytips.com/update-raspberry-pi-latest-version/">this guide</a>.<br />
<br />
This was an arduous process of running apt-get update, apt-get upgrade, rebooting, manually editing /etc/apt/sources.list, apt-get update, apt-get upgrade, rebooting, apt-get update, apt-get upgrade, apt-get install nodejs, babysitting all of these commands because some of them require user input, losing SSH access as a result of some updates (make sure to run these commands inside screen or tmux!), physically accessing the device to restart sshd, etc.<br />
<br />
Finally at the end of it, this command worked:<br />
<div id='code'>node a.out.js<br />
(output) Hello, world!</div>
Hopefully these steps work for you!<br />
<br />
<br />
<h3>Other Useful Info</h3><br />
If at any point you need to clean build, you can do this:<br />
<div id='code'>rm -rf llvm/git/build_main_32</div>
I had to do this once when figuring out the workaround for the exfat symlink issue. If you change the directory emsdk is running in between attempts, the build scripts will not let you pick up where you left off.<br />
<br />
<br />
Here's what got me up to the compiling phase in the iSH app on iPad:<br />
<br />
apk add cmake<br />
apk add make<br />
apk add clang<br />
apk add binutils<br />
apk add libc-dev<br />
apk add gcc<br />
apk add libstdc++6<br />
apk add g++<br />
git clone https://github.com/emscripten-core/emsdk.git<br />
cd emsdk<br />
./emsdk install sdk-upstream-master-32bit<br />
(note that this will take HOURS to clone LLVM)<br />
Progress compiling got to 2% and then iSH crashes.<br />
<br />
(I filed an <a href="https://github.com/ish-app/ish/issues/2016">issue</a>.)
</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/simplify-picking-restaurant.html'>Simplify Picking a Restaurant</a>
</h2>
</div>
<img src="/m/food-sheet.png">
<div id='postdate'>Posted on 11/22/2022<br />
Tags: <a href='/tags.html'>Food</a>, <a href='/tags.html'>Parenting</a>, <a href='/tags.html'>Tools</a></div>
With a toddler at home, we've come to rely on DoorDash as a quick way for the adults to eat tasty food.<br />
<br />
We're lucky to live in an area densely packed with restaurants. Despite the wealth of options, we often struggle to choose when dinnertime arrives.<br />
<br />
My spouse and I will end up naming restaurants, taking turns rejecting options one-by-one. On some days, nothing sounds good. On some days, we're exhausted from a night of interrupted sleep and lack the energy to pick. Often both.<br />
<br />
I got the idea to make picking a restaurant more mechanical on the hard days.<br />
<br />
At first, I considered building a web app with a database and a nice UI for listing restaurants and saving our history. I spend most of my non-work hours taking care of the baby, exercising, or doing chores so even a simple side-project takes months and comes at the cost of precious sleep hours. I needed a lower-effort way to test the idea.<br />
<br />
I realized I could make this tool in a shared spreadsheet. I used Numbers on iPhone/iPad and shared the sheet with my spouse using iCloud. Google Sheets could've worked too. Spreadsheets are a great low-effort way to solve problems without writing code. I bet a lot of software engineers underutilize spreadsheets.<br />
<br />
Here's how it works:<br />
- Add a row for every restaurant<br />
- Have a column for the last time we ate there<br />
- Have a column for each person with an estimate of how often they are willing to eat at each particular restaurant<br />
- Have a column to note any restaurants someone is actively in the mood to eat at<br />
- The sheet calculates a recommendation for each row:<br />
&nbsp;&nbsp;&nbsp;&nbsp;- Too soon: neither person is ready to eat there again<br />
&nbsp;&nbsp;&nbsp;&nbsp;- Let's eat (green): both people are ready OR someone is in the mood<br />
&nbsp;&nbsp;&nbsp;&nbsp;- Maybe eat (yellow): one person is ready<br />
- At dinnertime, peruse the green and yellow rows to pick efficiently<br />
<br />
Grab my <a href="/m/Food-Example.numbers">example sheet</a> to create your own.
</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/trippy-art.html'>Trippy Art</a>
</h2>
</div>
<img src="/m/trippyart/doorway.png">
<div id='postdate'>Posted on 11/20/2022<br />
Tags: <a href='/tags.html'>Art</a></div>
Here's a collection of trippy art from various corners of the internet. Some is generated with the help of neural networks. Some is human-made.<br />
<br />
<h4><a href="p/trippy-art.html">View the collection</a></h4>
</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/taptoy.html'>Tap Toy</a>
</h2>
</div>
<img src="/m/taptoy/taptoy.jpg">
<div id='postdate'>Posted on 5/30/2022<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Art</a>, <a href='/tags.html'>Games</a></div>
Introducing my latest project: <a href="/m/taptoy/index.html">Tap Toy</a><br />
<br />
Tap Toy is a fun little web app for relaxation. Tap the screen to launch some characters which then bounce off each other. Turn on sound for satisfying sound effects and relaxing public-domain background music. In some ways, I think this toy brings the catharsis of popping bubble wrap to your touch screen.<br />
<br />
I got the idea for this project after watching my then-9-month-old's fascination with my iPhone and iPad. Note that the CDC guidelines recommend "no screen time for children younger than 2 years" (<a href="https://www.cdc.gov/obesity/downloads/15_256312-A_May_LicensingDocument_Final_508_508tagged.pdf">source</a>, <a href="/m/cdc_screentime.pdf">backup</a>) but these kids will still find a way to grab your device for a fleeting moment before you take it back.<br />
<br />
I wondered if I could make an app to soothe and distract our baby if we ever became truly desperate for a moment of peace. (Fortunately, we still haven't reached this point yet!)<br />
<br />
I modeled some of the behavior after <a href="https://www.amazon.com/Baby-Einstein-Along-Tunes-Musical/dp/B000YDDF6O">Baby Einstein Take Along Tunes</a>, one of the more pleasant sound-making toys we have:<br />
<br />
<img src="/m/babyeinsteintunes.jpg"><br />
The result, as my wife described it, is "crack". She was having a bad day when Tap Toy was first ready to play with and she ended up zoning out, addicted, tapping it for 30 minutes while some of her stress melted away.<br />
<br />
As is usual for me, this side-project is a remix of a few other projects:<br />
<br />
- <a href="http://magickeyboard.io">MagicKeyboard.io</a> (<a href="/m/magickeyboard/index.html">backup</a>, <a href="https://github.com/feross/magickeyboard.io">source</a>) by <a href="http://feross.org">Feross Aboukhadijeh</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;- Which in turn is inspired by a <a href="https://www.reddit.com/r/gifs/comments/3t5ssx/magic_keyboard/">reddit post</a> about this <a href="https://momentfactory.com/lab/keyboard-magic">art project</a> by Moment Factory<br />
&nbsp;&nbsp;&nbsp;&nbsp;- In fact, I kept the keyboard triggers to launch sprites from the right location along the bottom of the screen<br />
&nbsp;&nbsp;&nbsp;&nbsp;- I fixed the sound effect code and added background music<br />
&nbsp;&nbsp;&nbsp;&nbsp;- I also added real multi-touch and mouse support<br />
<br />
- <a href="/p/pceimage.html">PCEImage</a> (note that the Koffing, Pikachu in Tap Toy show up in <a href="/m/pceimage/index.html">PCEImage Editor</a>'s list of examples)<br />
<br />
Some tips:<br />
<br />
- You can add this web page to your home screen on iOS or Android. If you do that, it'll behave more like a normal app. (I did the extra bit of work to make this a "progressive web app")<br />
<br />
- If you give this to a kid, you can use <a href="https://support.apple.com/en-us/HT202612">Guided Access</a> to prevent them from leaving the app<br />
<br />
An idea to take this further:<br />
<br />
- Holiday-themed Tap Toys: Halloween, Thanksgiving, Christmas, Chanukah, New Year's Eve, etc<br />

</div>

<hr />
<div id='post'>
<div id='header'>
<h2>
<a href='p/pceimage-editor.html'>PCEImage Editor</a>
</h2>
</div>
<img src="/m/pceimage/koffing-code.png">
<div id='postdate'>Posted on 2/13/2022<br />
Tags: <a href='/tags.html'>Programming</a>, <a href='/tags.html'>Art</a>, <a href='/tags.html'>Tools</a></div>
After defining the <a href="/p/pceimage.html">PCEImage specification</a>, I wanted to create a great code editor that can color each character in the image.<br />
<br />
<a href="/m/pceimage/index.html">Try out the editor in your browser</a> or read on for more details.<br />
<br />
I was inspired by the <a href="https://www.puzzlescript.net/editor.html?hack=6994394">PuzzleScript editor</a> (mentioned in my <a href="/p/puzzlescript.html">post about PuzzleScript</a>), especially how sprites are defined and styled. Whereas PuzzleScript sprites use <a href="https://en.wikipedia.org/wiki/Indexed_color">indexed color</a>, PCEImage can use almost any ASCII character as a pixel so I couldn't just reuse the same editor.<br />
<br />
I could reuse the same foundations, though! PuzzleScript's editor is built using <a href="https://codemirror.net/">CodeMirror</a>, an open-source text editor implemented in JavaScript for the browser.<br />
<br />
CodeMirror is super customizable and I was able to add the coloring support I needed by writing a <a href="/m/pceimage/editor/parser.js">parser</a> and making some changes to <a href="/m/pceimage/editor/codemirror.js">codemirror.js</a>.<br />
<br />
I also added support to the editor to automatically generate PNGs and, to add a little fun, wobbling GIFs.<br />
<br />
<img src="/m/pceimage/koffing.gif"><br />
For the wobble effect, I was inspired by <a href="https://www.lexaloffle.com/bbs/?tid=40058">Wobblepaint</a> (mentioned in my <a href="/p/pico8.html">PICO-8 post</a>) and did my best to try to capture the same organic and charming wobble <a href="https://www.lexaloffle.com/bbs/?uid=1">zep</a> invented.<br />
<br />
I also included some "Color Utilites" on the editor page: a simple color picker, a button to invoke your system color picker, and some example palettes (including PICO-8's). Check out <a href="https://lospec.com/palette-list">Lospec's Palette List</a> for even more ideas.<br />
<br />
If you create any cool PCEImages, I hope you'll consider <a href="https://github.com/memalign/memalign.github.io/edit/master/m/pceimage/Images.js">submitting a pull request</a> to add your example! I'll find some way to credit the submitters on the page if I get any!<br />

</div>

<hr />
More posts:<br />
<a href='p/pceimage.html'>PCEImage</a><br />
<a href='p/beatles.html'>My Beatles Picks</a><br />
<a href='p/soundsjustlike.html'>SoundsJustLike</a><br />
<a href='p/puzzlescript.html'>PuzzleScript</a><br />
<a href='p/wheat-chex.html'>Wheat Chex</a><br />
<a href='p/pico8.html'>PICO-8</a><br />
<a href='p/fussy-checklist.html'>Fussy Baby Checklist</a><br />
<a href='p/zen-sleep.html'>Fall Asleep</a><br />
<a href='p/shape-your-destiny.html'>Shape Your Destiny</a><br />
<a href='p/tims-vermeer.html'>Tim's Vermeer</a><br />
<a href='p/day-and-night.html'>Day and Night</a><br />
<a href='p/lights-off.html'>Lights Off</a><br />
<a href='p/batman-curve.html'>Batman Curve</a><br />
<a href='p/formulagraph.html'>FormulaGraph</a><br />
<a href='p/bouncing-ball.html'>Bouncing Ball</a><br />
<a href='p/shape-catalog.html'>Catalog of Math Shapes</a><br />
<a href='p/draw-shapes.html'>Draw Shapes Using Math</a><br />
<a href='p/similar-songs.html'>Similar Songs</a><br />
<a href='p/reddit.html'>Building a Reddit app</a><br />
<a href='p/counterfeit-monkey.html'>Counterfeit Monkey</a><br />
<a href='p/listed-action-if.html'>Listed Action Interactive Fiction</a><br />
<a href='p/andrew-plotkin.html'>Andrew Plotkin's Zarfhome</a><br />
<a href='p/product-reviews.html'>Product Review Writing Prompts</a><br />
<a href='p/dungeon-memalign.html'>Dungeon Memalign</a><br />
<a href='p/pacman-dungeon.html'>Pac-Man Dungeon</a><br />
<a href='p/queens-gambit.html'>The Queen's Gambit</a><br />
<a href='p/rebecca-meyer.html'>Rebecca Meyer</a><br />
<a href='p/coding-machines.html'>Coding Machines</a><br />
<a href='p/clamps.html'>Clamps</a><br />
<a href='p/emoji-conway.html'>Emoji Simulator</a><br />
<a href='p/universal-paperclips.html'>Universal Paperclips</a><br />
<a href='p/rabbit-hole.html'>Fall Down the Rabbit Hole</a><br />
<a href='p/live-covid19.html'>Live COVID-19 Dashboard</a><br />
<a href='p/graph-js.html'>Create COVID-19 Graphs Using JavaScript</a><br />
<a href='p/books.html'>Books</a><br />
<a href='p/notes-txt.html'>notes.txt</a><br />
<a href='p/speed-up-av.html'>Download Video Into Your Brain</a><br />
<a href='p/tts-download-into-brain.html'>Download Text Into Your Brain</a><br />
<a href='p/source-control.html'>Source Control</a><br />
<a href='p/personal-projects.html'>Personal Projects</a><br />
<a href='p/text-adventure.html'>How to Program a Text Adventure</a><br />
<a href='p/feedly.html'>RSS and Feedly</a><br />
<a href='p/this-website.html'>Welcome</a><br />

</div>
<div id="footer"></div>
</body>
</html>
